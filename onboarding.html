<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Reckoning Figures!</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@700;800;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: #1f2937;
            color: white;
            overflow: hidden;
        }

        /* Onboarding Overlay */
        #onboarding {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #1f2937 0%, #0f172a 100%);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .onboarding-container {
            max-width: 500px;
            width: 90%;
            text-align: center;
            padding: 40px;
        }

        /* Step indicator */
        .step-indicator {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-bottom: 40px;
        }

        .step-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #374151;
            transition: all 0.3s ease;
        }

        .step-dot.active {
            background: #58CC02;
            width: 32px;
            border-radius: 6px;
        }

        /* Content */
        .step-content {
            animation: slideIn 0.4s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step-icon {
            font-size: 96px;
            margin-bottom: 24px;
            animation: bounce 0.6s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes pop {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .step-title {
            font-size: 36px;
            font-weight: 900;
            color: white;
            margin-bottom: 16px;
            line-height: 1.2;
        }

        .step-description {
            font-size: 18px;
            font-weight: 700;
            color: #9ca3af;
            line-height: 1.6;
            margin-bottom: 40px;
        }

        .highlight {
            color: #58CC02;
            font-weight: 900;
        }

        .highlight-xp {
            color: #FFA500;
            font-weight: 900;
        }

        /* Buttons */
        .button-container {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .onboarding-btn {
            padding: 18px 32px;
            border: none;
            border-radius: 12px;
            font-family: 'Nunito', sans-serif;
            font-size: 18px;
            font-weight: 900;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: #58CC02;
            color: white;
            flex: 1;
            max-width: 250px;
        }

        .btn-primary:hover {
            background: #4CAE00;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            color: #9ca3af;
            border: 2px solid #374151;
            padding: 16px 24px;
        }

        .btn-secondary:hover {
            border-color: #58CC02;
            color: #58CC02;
        }

        /* Visual Examples */
        .example-box {
            background: #374151;
            border: 2px solid #4b5563;
            border-radius: 16px;
            padding: 20px;
            margin: 24px 0;
            display: inline-block;
        }

        .example-equation {
            font-size: 32px;
            font-weight: 900;
            color: white;
            margin-bottom: 12px;
        }

        .example-xp {
            font-size: 48px;
            font-weight: 900;
            color: #58CC02;
            text-shadow: 
                0 0 20px #58CC02,
                0 0 40px #58CC02;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .example-streak {
            display: inline-block;
            background: #FFA500;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: 900;
            margin: 8px;
        }

        /* Skip button */
        .skip-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            color: #9ca3af;
            font-family: 'Nunito', sans-serif;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            padding: 8px 16px;
        }

        .skip-btn:hover {
            color: white;
        }
    </style>
</head>
<body>
    <div id="onboarding">
        <button class="skip-btn" onclick="skipOnboarding()">Skip Tutorial</button>
        
        <div class="onboarding-container">
            <!-- Step Indicator -->
            <div class="step-indicator">
                <div class="step-dot active" id="dot-0"></div>
                <div class="step-dot" id="dot-1"></div>
                <div class="step-dot" id="dot-2"></div>
                <div class="step-dot" id="dot-3"></div>
            </div>

            <!-- Step Content -->
            <div class="step-content" id="step-content"></div>

            <!-- Navigation Buttons -->
            <div class="button-container" id="button-container"></div>
        </div>
    </div>

    <script>
        const steps = [
            {
                icon: `<svg viewBox="0 0 64 64" width="96" height="96">
                    <circle cx="32" cy="32" r="28" fill="#58CC02" opacity="0.2"/>
                    <path d="M32 8 L36 16 L45 18 L38 25 L40 34 L32 29 L24 34 L26 25 L19 18 L28 16 Z" fill="#58CC02"/>
                    <rect x="28" y="34" width="8" height="22" fill="#58CC02" rx="2"/>
                    <circle cx="32" cy="32" r="30" fill="none" stroke="#58CC02" stroke-width="2"/>
                </svg>`,
                title: 'Welcome to Reckoning Figures!',
                description: 'Master <span class="highlight">Algebra Through Gameplay</span> with fast-paced, game-like challenges. Complete figures, earn XP, and climb the leaderboards!',
                buttons: ['Next']
            },
            {
                icon: `<svg viewBox="0 0 64 64" width="96" height="96">
                    <circle cx="32" cy="32" r="28" fill="#FFA500" opacity="0.2"/>
                    <circle cx="32" cy="32" r="20" fill="none" stroke="#FFA500" stroke-width="3"/>
                    <circle cx="32" cy="32" r="12" fill="none" stroke="#FFA500" stroke-width="3"/>
                    <circle cx="32" cy="32" r="4" fill="#FFA500"/>
                    <line x1="32" y1="12" x2="32" y2="18" stroke="#FFA500" stroke-width="3"/>
                    <line x1="32" y1="46" x2="32" y2="52" stroke="#FFA500" stroke-width="3"/>
                    <line x1="12" y1="32" x2="18" y2="32" stroke="#FFA500" stroke-width="3"/>
                    <line x1="46" y1="32" x2="52" y2="32" stroke="#FFA500" stroke-width="3"/>
                </svg>`,
                title: 'Complete Figures',
                description: 'Each <span class="highlight">Figure</span> teaches one skill through 9 quick questions. Answer correctly to earn <span class="highlight-xp">XP</span> and maintain your streak!',
                visual: `
                    <div class="example-box">
                        <div class="example-equation">x + 5 = 12</div>
                        <div style="font-size: 16px; color: #9ca3af;">What should we do first?</div>
                    </div>
                `,
                buttons: ['Back', 'Next']
            },
            {
                icon: `<svg viewBox="0 0 64 64" width="96" height="96">
                    <circle cx="32" cy="32" r="28" fill="#FBBF24" opacity="0.2"/>
                    <path d="M32 10 L36 24 L50 26 L40 36 L43 50 L32 43 L21 50 L24 36 L14 26 L28 24 Z" fill="#FBBF24" stroke="#F59E0B" stroke-width="2"/>
                    <circle cx="32" cy="32" r="8" fill="#F59E0B"/>
                    <path d="M28 30 L30 32 L36 26" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>`,
                title: 'Earn XP & Streak',
                description: 'Get answers right in a row to build your <span class="highlight">Question Streak</span>. Complete figures flawlessly to earn <span class="highlight-xp">bonus XP</span>!',
                visual: `
                    <div class="example-xp">+50 XP!</div>
                    <div>
                        <span class="example-streak">3 in a row!</span>
                        <span class="example-streak">5 in a row!</span>
                    </div>
                `,
                buttons: ['Back', 'Next']
            },
            {
                icon: `<svg viewBox="0 0 64 64" width="96" height="96">
                    <circle cx="32" cy="32" r="28" fill="#60A5FA" opacity="0.2"/>
                    <rect x="12" y="42" width="12" height="12" fill="#CD7F32" rx="2"/>
                    <rect x="26" y="32" width="12" height="22" fill="#9CA3AF" rx="2"/>
                    <rect x="40" y="22" width="12" height="32" fill="#FFA500" rx="2"/>
                    <path d="M32 8 L36 16 L45 18 L38 25 L40 34 L32 29 L24 34 L26 25 L19 18 L28 16 Z" fill="#FBBF24" stroke="#F59E0B" stroke-width="1.5"/>
                </svg>`,
                title: 'Climb the Leaderboards',
                description: 'Compete with others on <span class="highlight">XP Rankings</span> and <span class="highlight">Question Streaks</span>. Rise through leagues from Bronze to Diamond!',
                visual: `
                    <div style="font-size: 18px; margin-top: 20px;">
                        <div style="color: #CD7F32; font-weight: 900; margin: 8px;">
                            <svg viewBox="0 0 24 24" width="20" height="20" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
                                <circle cx="12" cy="12" r="10" fill="#CD7F32"/>
                                <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="900">3</text>
                            </svg>
                            Bronze League
                        </div>
                        <div style="color: #9CA3AF; font-weight: 900; margin: 8px;">
                            <svg viewBox="0 0 24 24" width="20" height="20" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
                                <circle cx="12" cy="12" r="10" fill="#9CA3AF"/>
                                <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="900">2</text>
                            </svg>
                            Silver League
                        </div>
                        <div style="color: #FFA500; font-weight: 900; margin: 8px;">
                            <svg viewBox="0 0 24 24" width="20" height="20" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
                                <circle cx="12" cy="12" r="10" fill="#FFA500"/>
                                <text x="12" y="16" text-anchor="middle" fill="white" font-size="12" font-weight="900">1</text>
                            </svg>
                            Gold League
                        </div>
                        <div style="color: #60A5FA; font-weight: 900; margin: 8px;">
                            <svg viewBox="0 0 24 24" width="20" height="20" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
                                <path d="M12 2 L15 8 L22 9 L17 14 L18 21 L12 18 L6 21 L7 14 L2 9 L9 8 Z" fill="#60A5FA"/>
                            </svg>
                            Diamond League
                        </div>
                    </div>
                `,
                buttons: ['Back', 'Start Learning!']
            }
        ];

        let currentStep = 0;

        function renderStep() {
            const step = steps[currentStep];
            const content = document.getElementById('step-content');
            const buttonContainer = document.getElementById('button-container');

            // Update dots
            document.querySelectorAll('.step-dot').forEach((dot, index) => {
                dot.classList.toggle('active', index === currentStep);
            });

            // Update content
            content.innerHTML = `
                ${step.icon ? `<div class="step-icon">${step.icon}</div>` : ''}
                ${step.visual || ''}
                ${step.title ? `<div class="step-title">${step.title}</div>` : ''}
                <div class="step-description">${step.description}</div>
            `;

            // Update buttons
            buttonContainer.innerHTML = step.buttons.map(btn => {
                if (btn === 'Back') {
                    return `<button class="onboarding-btn btn-secondary" onclick="previousStep()">${btn}</button>`;
                } else if (btn === 'Start Learning!') {
                    return `<button class="onboarding-btn btn-primary" onclick="completeOnboarding()">${btn}</button>`;
                } else {
                    return `<button class="onboarding-btn btn-primary" onclick="nextStep()">${btn}</button>`;
                }
            }).join('');
        }

        function nextStep() {
            if (currentStep < steps.length - 1) {
                currentStep++;
                renderStep();
            }
        }

        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                renderStep();
            }
        }

        function skipOnboarding() {
            localStorage.setItem('onboardingComplete', 'true');
            window.location.href = 'main-menu-modules.html';
        }

        function completeOnboarding() {
            localStorage.setItem('onboardingComplete', 'true');
            
            // Celebration!
            document.getElementById('step-content').innerHTML = `
                <svg viewBox="0 0 64 64" width="128" height="128" style="animation: pop 0.6s ease;">
                    <circle cx="32" cy="32" r="28" fill="#58CC02" opacity="0.2"/>
                    <path d="M32 10 L36 24 L50 26 L40 36 L43 50 L32 43 L21 50 L24 36 L14 26 L28 24 Z" fill="#58CC02" stroke="#4CAE00" stroke-width="2"/>
                    <path d="M22 32 L28 38 L42 24" stroke="white" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="step-title" style="color: #58CC02; animation: pop 0.6s ease 0.1s backwards;">You're Ready!</div>
                <div class="step-description">Let's start your algebra journey!</div>
            `;
            document.getElementById('button-container').innerHTML = '';

            setTimeout(() => {
                window.location.href = 'main-menu-modules.html';
            }, 2000);
        }

        // Initial render
        renderStep();

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'Enter') {
                if (currentStep < steps.length - 1) nextStep();
                else completeOnboarding();
            } else if (e.key === 'ArrowLeft') {
                previousStep();
            }
        });
    </script>
</body>
</html>
